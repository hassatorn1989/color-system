# services:
#   nginx:
#     image: nginx:latest
#     restart: unless-stopped
#     container_name: color_system_nginx
#     tty: true
#     ports:
#       - "3200:80"
#     volumes:
#       - ./backend:/var/www/html
#       - ./nginx/default.conf:/etc/nginx/conf.d/default.conf
#     depends_on:
#       - php
#       - nextjs
#     networks:
#       - color_system_net
  
#   nginx-nextjs:
#     image: nginx:latest
#     restart: unless-stopped
#     container_name: color_system_nginx_nextjs
#     tty: true
#     ports:
#       - "8080:80"
#     volumes:
#       - ./frontend:/var/www/html
#       - ./nginx/nextjs.conf:/etc/nginx/conf.d/default.conf
#     depends_on:
#       - nextjs
#     networks:
#       - color_system_net

#   php:
#     build: ./php
#     restart: unless-stopped
#     container_name: color_system_php
#     tty: true
#     volumes:
#       - ./backend:/var/www/html
#     extra_hosts:
#       - "host.docker.internal:host-gateway"
#     ports:
#       - "3100:9000"
#     networks:
#       - color_system_net

#   nextjs:
#     build: ./frontend
#     restart: unless-stopped
#     container_name: color_system_nextjs
#     tty: true
#     ports:
#       - "3000:3000"
#     volumes:
#       - ./frontend:/var/www/html
#     environment:
#       - NODE_ENV=production
#       - DATABASE_URL=mysql://root:root@host.docker.internal:3306/db_color_system
#     extra_hosts:
#       - "host.docker.internal:host-gateway"
#     networks:
#       - color_system_net

# networks:
#   color_system_net:
#     driver: bridge

services:
  backend:
    build: ./backend
    container_name: color-system-backend
    volumes:
      - ./backend:/var/www/html
    # environment:
    #   APP_ENV: local
    #   APP_DEBUG: true
    networks:
      - color-system-network

  nginx:
    image: nginx:alpine
    container_name: color-system-nginx
    ports:
      - "8000:80"
    volumes:
      - ./backend:/var/www/html
      - ./backend/nginx.conf:/etc/nginx/conf.d/default.conf
    depends_on:
      - backend
    networks:
      - color-system-network

  frontend:
    build: ./frontend
    container_name: color-system-frontend
    ports:
      - "3000:3000"
    # environment:
    #   NEXT_PUBLIC_API_URL: http://localhost:8000
    volumes:
      - ./frontend:/app
    depends_on:
      - backend
    networks:
      - color-system-network

networks:
  color-system-network:
    driver: bridge

